<script>
/**
 * =================================================================
 * MODULE JAVASCRIPT - INTERFACE UTILISATEUR (UI)
 * =================================================================
 * Description: Gère les composants d'interface utilisateur génériques
 * comme les notifications, les messages d'erreur et
 * l'indicateur de chargement.
 */

/**
 * Journalise un avertissement avec le préfixe [ELS].
 * @param {...*} args Contenu à journaliser.
 */
function logWarn(...args) {
  console.warn('[ELS]', ...args);
}

/**
 * Journalise une erreur avec le préfixe [ELS].
 * @param {...*} args Contenu à journaliser.
 */
function logError(...args) {
  console.error('[ELS]', ...args);
}

/**
 * Affiche une notification animée à l'écran.
 * @param {string} message Le message à afficher.
 * @param {string} [type="info"] Le type de notification ('info', 'succes', 'erreur').
 */
function afficherNotification(message, type = "info") {
  const conteneur = document.getElementById('conteneur-notifications');
  if (!conteneur) {
    logError("Le conteneur de notifications est introuvable.");
    return;
  }
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.textContent = message;
  conteneur.appendChild(notification);
  
  // La notification disparaît automatiquement après 5 secondes.
  setTimeout(() => {
    notification.remove();
  }, 5000);
}

/**
 * Affiche ou masque l'indicateur de chargement global (spinner).
 * C'est la fonction qui manquait.
 * @param {boolean} afficher True pour afficher, false pour masquer.
 */
function basculerIndicateurChargement(afficher) {
  // Cette fonction utilise l'élément que nous avons déjà dans Reservation_Interface.html
  const indicateur = document.getElementById('indicateur-chargement');
  if (indicateur) {
    indicateur.classList.toggle('hidden', !afficher);
  } else {
    logWarn("L'élément 'indicateur-chargement' est introuvable dans le DOM.");
  }
}

/**
 * Gère l'affichage d'une erreur à l'utilisateur et dans la console.
 * @param {Object|string} erreur L'objet d'erreur ou le message à afficher.
 */
function afficherErreur(erreur) {
  basculerIndicateurChargement(false); // Toujours masquer le chargement en cas d'erreur.
  const messageErreur = typeof erreur === 'object' && erreur.message ? erreur.message : String(erreur);
  afficherNotification(`Erreur : ${messageErreur}`, "erreur");
  logError(erreur);
}
</script>

