<!DOCTYPE html>
<html lang="fr">
<head>
  <? var appUrl = ScriptApp.getService().getUrl(); var nomService = NOM_ENTREPRISE; ?>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Livraison pharmacie à domicile et EHPAD sur Tamaris, Mar Vivo, Six-Fours-les-Plages, Sanary, Portissol et Bandol.">
  <link rel="canonical" href="<?= appUrl ?>">
  <meta property="og:title" content="<?= nomService ?> | Mon Espace Client">
  <meta property="og:description" content="Livraison pharmacie à domicile et EHPAD sur Tamaris, Mar Vivo, Six-Fours-les-Plages, Sanary, Portissol et Bandol.">
  <meta property="og:url" content="<?= appUrl ?>">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="<?= nomService ?> | Mon Espace Client">
  <meta name="twitter:description" content="Livraison pharmacie à domicile et EHPAD sur Tamaris, Mar Vivo, Six-Fours-les-Plages, Sanary, Portissol et Bandol.">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "LocalBusiness",
        "@id": "<?= appUrl ?>#business",
        "name": "<?= nomService ?>",
        "description": "Livraison pharmacie à domicile et EHPAD sur Tamaris, Mar Vivo, Six-Fours-les-Plages, Sanary, Portissol et Bandol.",
        "url": "<?= appUrl ?>",
        "email": "<?= EMAIL_ENTREPRISE ?>",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Six-Fours-les-Plages",
          "addressCountry": "FR"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": 43.0842,
          "longitude": 5.8009
        },
        "areaServed": [
          { "@type": "Place", "name": "Tamaris" },
          { "@type": "Place", "name": "Mar Vivo" },
          { "@type": "Place", "name": "Six-Fours-les-Plages" },
          { "@type": "Place", "name": "Sanary" },
          { "@type": "Place", "name": "Portissol" },
          { "@type": "Place", "name": "Bandol" }
        ]
      },
      {
        "@type": "Service",
        "@id": "<?= appUrl ?>#service",
        "serviceType": "Livraison de pharmacie",
        "provider": { "@id": "<?= appUrl ?>#business" },
        "areaServed": [
          { "@type": "Place", "name": "Tamaris" },
          { "@type": "Place", "name": "Mar Vivo" },
          { "@type": "Place", "name": "Six-Fours-les-Plages" },
          { "@type": "Place", "name": "Sanary" },
          { "@type": "Place", "name": "Portissol" },
          { "@type": "Place", "name": "Bandol" }
        ]
      }
    ]
  }
  </script>
  <title><?= nomService ?> | Mon Espace Client</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" media="print" onload="this.media='all'">
  <?!= include('ThemeCapsule') ?>
  <style id="theme-style"></style>
  <?!= include('Client_CSS'); ?>
  <?!= include('charte'); ?>
</head>
<body>

  <div id="indicateur-chargement" class="indicateur-chargement-overlay">
    <div class="spinner"></div>
  </div>

  <div id="app-conteneur-principal">

    <header class="app-header" role="banner">
      <?!= include('Logo'); ?>
      <a href="<?= ScriptApp.getService().getUrl() ?>" class="btn btn-primaire" role="button" aria-label="Nouvelle réservation">Réserver</a>
    </header>
    <section class="blister-bg" role="region" aria-label="Espace client">
      <div class="hero card">
        <h1>Mon espace client</h1>
        <p>Consultez vos réservations et factures.</p>
        <a href="<?= ScriptApp.getService().getUrl() ?>" class="btn btn-primaire" role="button" aria-label="Faire une réservation">Nouvelle réservation</a>
      </div>
    </section>

    <main id="conteneur-app" class="hidden">

      <div class="carte card barre-outils">
        
        <div id="ca-client" class="carte card slot" tabindex="0"></div>
        <div id="liste-reservations" class="carte card slot">
  <div class="inner">
        <h3>Vos prochaines courses</h3>
        <div id="contenu-reservations">
          <!-- Les réservations seront injectées ici par le script JS -->
        </div>
      </div>
  </div>
  <div id="liste-factures" class="carte card slot">
  <div class="inner">
        <h3>Vos factures</h3>
        <div id="contenu-factures">
          <!-- Les factures seront injectées ici par le script JS -->
        </div>
      </div>
  </div>
      <? if (typeof PRO_QA_ENABLED !== 'undefined' && PRO_QA_ENABLED) { ?>
        <div id="bloc-questions" class="carte card">
        <h3>Vos questions</h3>
        <div id="liste-questions" aria-live="polite"></div>
        <form id="form-question" class="groupe-formulaire" autocomplete="off">
          <label for="question-texte">Posez votre question</label>
          <input type="text" id="question-texte" class="champ-formulaire" required aria-required="true">
          <button type="submit" class="btn btn-primaire btn--client" style="margin-top:10px;">Envoyer</button>
        </form>
      </div>
      <? } ?>
        <div class="carte card">
        <p>Pour toute annulation ou pour une modification non disponible ici, veuillez nous contacter directement.</p>
        <a href="<?= ScriptApp.getService().getUrl() ?>" class="btn btn-secondaire btn--client">Faire une nouvelle réservation</a>
        <a href="mailto:<?= ADMIN_EMAIL ?>" class="btn btn-secondaire btn--client" style="margin-left: 10px;">Contacter le support</a>
      </div>
    </main>

    <div id="non-connecte" class="carte card hidden">
        <h3>Accès à l'espace client</h3>
        <p>Pour consulter vos réservations, veuillez utiliser le lien qui vous a été envoyé par e-mail ou saisissez votre adresse ci-dessous.</p>
        
        <form id="formulaire-connexion-client" class="groupe-formulaire" style="margin-top: 20px;">
            <label for="email-connexion">Votre adresse e-mail :</label>
            <input type="email" id="email-connexion" class="champ-formulaire" required placeholder="exemple@domaine.com">
            <div id="erreur-connexion" class="message-erreur-connexion hidden"></div>
            <button type="submit" class="btn btn-primaire btn--client" style="margin-top: 15px; width: 100%;">Accéder à mes réservations</button>
        </form>

        <a href="<?= ScriptApp.getService().getUrl() ?>" class="btn btn-secondaire btn--client" style="margin-top: 20px;">Retour à la page de réservation</a>
    </div>
  </div>

  <div id="modale-modification" class="modale-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="modale-modification-titre">
    <div class="modale-contenu">
      <button id="btn-fermer-modale" class="btn-fermer" aria-label="Fermer la fenêtre de modification">&times;</button>
      <div id="contenu-modale-wrapper">
        <!-- Le contenu de la modale sera injecté ici -->
      </div>
    </div>
  </div>

  <div id="conteneur-notifications"></div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.theme-selector, #btn-theme, #menu-theme').forEach(el => el && el.remove());
    });
  </script>
  <script>
    const params = new URLSearchParams(window.location.search);
    window.CLIENT_PARAMS = {
      email: params.get('email') || '',
      exp: params.get('exp') || '',
      sig: params.get('sig') || ''
    };
  </script>
  <?!= include('Render_JS'); ?>
  <?!= include('Client_JS'); ?>
<svg width="0" height="0" style="position:absolute" aria-hidden="true">
  <defs>
    <symbol id="icon-capsule-h" viewBox="0 0 260 120">
      <defs>
        <linearGradient id="elsGradientH" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0%"  stop-color="var(--violet)"/>
          <stop offset="70%" stop-color="var(--blue)"/>
          <stop offset="100%" stop-color="var(--blue-light)"/>
        </linearGradient>
        <linearGradient id="glossH" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="white" stop-opacity=".85"/>
          <stop offset="60%" stop-color="white" stop-opacity="0"/>
        </linearGradient>
      </defs>
      <rect x="10" y="10" width="120" height="100" rx="50" fill="url(#elsGradientH)"/>
      <rect x="130" y="10" width="120" height="100" rx="50" fill="#fff"/>
      <rect x="10" y="10" width="240" height="100" rx="50" fill="none" stroke="rgba(0,0,0,.25)" stroke-width="2"/>
      <rect x="128" y="10" width="4" height="100" fill="rgba(0,0,0,.15)"/>
      <rect x="20" y="15" width="220" height="40" rx="20" fill="url(#glossH)"/>
    </symbol>
  </defs>
</svg>
</body>
</html>



