<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Facture EL Services</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      <?!= include('Styles'); ?>
    </style>
    <?!= include('charte'); ?>
    <style>
      body { font-family: 'Montserrat', Arial, sans-serif; color: #1f2d3d; background: #f4f6fb; margin: 0; }
      .facture-wrapper { width: 210mm; min-height: 297mm; margin: 0 auto; background: #ffffff; padding: 24mm 22mm 20mm; }
      .facture-hero { display: flex; justify-content: space-between; gap: 18px; padding: 18px 22px; background: linear-gradient(120deg, #8e44ad, #3498db); border-radius: 18px; color: #ffffff; position: relative; overflow: hidden; }
      .facture-hero::after { content: ''; position: absolute; inset: 0; background: radial-gradient(circle at top right, rgba(255,255,255,0.28), transparent 55%); pointer-events: none; }
      .facture-logo { min-width: 120px; display: flex; align-items: center; justify-content: center; z-index: 1; }
      .facture-brand { z-index: 1; }
      .facture-brand h1 { margin: 0 0 6px; font-size: 21pt; letter-spacing: 0.5px; }
      .facture-brand p { margin: 2px 0; font-size: 10pt; }
      .facture-brand .tagline { margin-top: 8px; font-size: 9.5pt; letter-spacing: 0.4px; text-transform: uppercase; }
      .chip { display: inline-flex; align-items: center; gap: 6px; padding: 3px 12px; border-radius: 999px; background: rgba(141,68,173,0.18); color: #8e44ad; font-size: 9pt; letter-spacing: 0.4px; text-transform: uppercase; font-weight: 600; }
      .section { margin: 22px 0 16px; page-break-inside: avoid; }
      .section h2 { margin: 10px 0 12px; font-size: 15pt; text-transform: uppercase; letter-spacing: 0.3px; color: #8e44ad; }
      .section h3 { margin: 12px 0 6px; font-size: 12pt; color: #3498db; }
      .meta-grid { display: flex; flex-wrap: wrap; gap: 18px; }
      .meta-card { flex: 1 1 220px; padding: 16px 18px; border-radius: 14px; background: #f8f9ff; border: 1px solid rgba(94,110,133,0.18); }
      .meta-card h3 { margin: 0 0 8px; font-size: 11pt; text-transform: uppercase; letter-spacing: 0.3px; color: #8e44ad; }
      .meta-card p { margin: 4px 0; }
      .resume-table { width: 100%; border-collapse: collapse; margin-top: 8px; font-size: 11pt; }
      .resume-table th { text-align: left; font-size: 9.5pt; color: #7b8a97; font-weight: 500; }
      .resume-table td { font-weight: 600; letter-spacing: 0.2px; color: #1f2d3d; }
      .resume-table tr + tr td, .resume-table tr + tr th { padding-top: 8px; border-top: 1px solid rgba(142,68,173,0.18); }
      .cta-links { margin-top: 16px; font-size: 10.5pt; color: #7b8a97; }
      .cta-links a { color: #8e44ad; font-weight: 600; text-decoration: none; }
      .cta-links a:hover { text-decoration: underline; }
      .mentions { background: #eef4ff; border-left: 4px solid #3498db; padding: 12px 16px; font-size: 10.2pt; color: #526170; margin-top: 18px; }
      .page-break { page-break-before: always; margin: 0; height: 0; }
      .annexe-wrapper { width: 210mm; min-height: 297mm; margin: 0 auto; background: #ffffff; padding: 18mm 20mm 18mm; }
      .annexe-wrapper .chip { background: rgba(53,152,219,0.12); color: #3498db; }
      table.data { width: 100%; border-collapse: collapse; font-size: 10.2pt; }
      table.data th, table.data td { border: 1px solid rgba(141,68,173,0.16); padding: 5px 7px; }
      table.data th { background: rgba(141,68,173,0.13); color: #8e44ad; font-size: 9.5pt; text-transform: uppercase; letter-spacing: 0.35px; }
      table.data td.notes { color: #7b8a97; font-style: italic; }
      table.data tbody tr:nth-child(even) { background: rgba(93,173,226,0.06); }
      @media print { body { background: #ffffff; } .facture-wrapper, .annexe-wrapper { box-shadow: none; padding: 20mm; } }
    </style>
  </head>
  <body>
    <div class="facture-wrapper">
      <div class="facture-hero">
        <div class="facture-logo">{{logo}}</div>
        <div class="facture-brand">
          <h1>{{nom_entreprise}}</h1>
          <p>{{adresse_entreprise}}</p>
          <p>SIRET : {{siret}} &bull; Email : {{email_entreprise}}</p>
          <p class="tagline">Bien-être patient • Excellence officinale</p>
        </div>
      </div>

      <section class="section">
        <span class="chip">Synthèse</span>
        <h2>Votre facture</h2>
        <p><strong>Numéro :</strong> {{numero_facture}} &nbsp; — &nbsp; <strong>Date :</strong> {{date_facture}}</p>
        <p><strong>Période couverte :</strong> {{periode_facturee}} ({{date_debut_periode}} → {{date_fin_periode}})</p>
        <p><strong>Échéance :</strong> {{date_echeance}}</p>
      </section>

      <section class="section">
        <div class="meta-grid">
          <div class="meta-card">
            <h3>Destinataire</h3>
            <p><strong>{{client_nom}}</strong></p>
            <p>{{client_adresse}}</p>
          </div>
          <div class="meta-card">
            <h3>Focus bien-être</h3>
            <table class="resume-table">
              <tr>
                <th>Total à régler</th>
                <td>{{total_du}} €</td>
              </tr>
              <tr>
                <th>Nombre de tournées</th>
                <td>{{nombre_courses}}</td>
              </tr>
            </table>
          </div>
        </div>
      </section>

      <section class="section">
        <h3>Transparence</h3>
        <div class="cta-links">
          Consultez nos documents :
          <a href="{{lien_tarifs}}" target="_blank" rel="noopener">Tarifs</a>
          &nbsp;•&nbsp;
          <a href="{{lien_cgv}}" target="_blank" rel="noopener">CGV</a>
          <small>Conservez ce lien pour retrouver les mises à jour.</small>
        </div>
      </section>

      <section class="section">
        <h3>Paiement</h3>
        <div class="mentions">
          <p>Paiement à effectuer sous {{delai_paiement}} jours sur le compte indiqué ci-dessous.</p>
          <p>IBAN : {{rib_entreprise}} &bull; BIC : {{bic_entreprise}}</p>
          <p>Nous sommes disponibles pour toute question relative à cette facture.</p>
        </div>
      </section>
    </div>

    <div class="page-break"></div>

    <div class="annexe-wrapper">
      <section class="section">
        <span class="chip">Détail de vos services</span>
        <h2>Annexe à la facture {{numero_facture}}</h2>
        <p class="notes">Imprimez uniquement cette page si nécessaire pour votre suivi interne.</p>
        <table class="data" data-els="bordereau-annexe">
          <thead>
            <tr>
              <th>Date</th>
              <th>Horaire</th>
              <th>Détails</th>
              <th>Notes</th>
              <th>Montant</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>01/09/25</td>
              <td>10h00</td>
              <td>Tournée pharmacie — 3 arrêts</td>
              <td class="notes">Exemple de note interne</td>
              <td>36,00 € (Remise : 4,00 €)</td>
            </tr>
            <tr>
              <td>05/09/25</td>
              <td>14h00</td>
              <td>Livraison urgente</td>
              <td class="notes"></td>
              <td>0,00 € (Offert)</td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>
  </body>
</html>
