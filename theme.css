:root{ --violet:#8e44ad; --blue:#3498db; --blueLight:#5dade2; --radius:16px; }
body{ font-family: Montserrat,system-ui,sans-serif; background:#f3f4f6; }
.blister-bg{
  background-image:radial-gradient(circle,rgba(0,0,0,.25)10%,transparent 11%);
  background-size:24px 24px; opacity:.08;
}
.card{ border-radius:var(--radius); box-shadow:0 8px 24px rgba(0,0,0,.08); }
.btn{ border-radius:999px; padding:.7rem 1.1rem; }
.btn-primary{ background:linear-gradient(90deg,var(--violet),var(--blue)); color:#fff; }
.btn:focus-visible{ outline:3px solid var(--blueLight); outline-offset:2px; }

/* === aluminium calendar background (image tile) === */
.calendar-shell,
.calendar-grid,
calendar,
monthGrid,
#vue-calendrier.carte {
  position: relative;
  background-image: var(--alu-tile-1x, var(--img-aluminium));
  background-size: var(--alu-size, 96px) var(--alu-size, 96px);
  background-repeat: repeat;
  border-radius: var(--radius, 16px);
  /* léger relief intérieur pour rappeler le gaufrage */
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.5),
    inset 0 -1px 0 rgba(0,0,0,.06);
}

/* === cellules calendrier → image d'arrière-plan locale à la cellule === */
.calendar-cell,
.day-cell,
.jour-calendrier {
  position: relative;
  z-index: 1; /* au-dessus du voile/alu global */
  border: 0;
  border-radius: 40px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain; /* sur l'alu global, on place la gélule/blister par-dessus */
  box-shadow: var(--shadow, 0 6px 18px rgba(15,23,42,.14));
  transition: transform .06s ease, box-shadow .2s ease;
}

/* état normal (réservable) */
.calendar-cell:not(.disabled):not(.desactive),
.day-cell:not(.disabled),
.jour-calendrier:not(.desactive) {
  background-image: var(--img-capsule);
  color: #0f172a;
}

/* état désactivé / indisponible */
.calendar-cell.disabled, .calendar-cell.desactive,
.day-cell.disabled, .day-cell.desactive,
.jour-calendrier.desactive {
  background-image: var(--img-blister-vide);
  filter: saturate(.92) brightness(.98);
  color: var(--muted);
  cursor: not-allowed;
}

/* hover/active (réservable) */
.calendar-cell:not(.disabled):not(.desactive):hover,
.day-cell:not(.disabled):hover,
.jour-calendrier:not(.desactive):hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 22px rgba(15,23,42,.20);
}
.calendar-cell:not(.disabled):not(.desactive):active,
.day-cell:not(.disabled):active,
.jour-calendrier:not(.desactive):active {
  transform: translateY(0);
  box-shadow: var(--shadow, 0 6px 18px rgba(15,23,42,.14));
}

/* focus clavier accessible */
.calendar-cell:focus-visible,
.day-cell:focus-visible,
.jour-calendrier:focus-visible {
  outline: 3px solid var(--blueLight);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.25), var(--shadow, 0 6px 18px rgba(15,23,42,.14));
}

/* voile pour lisibilité des numéros/labels */
.calendar-shell::before,
.calendar-grid::before,
calendar::before,
monthGrid::before,
#vue-calendrier.carte::before {
  content: "";
  position: absolute; inset: 0;
  background: rgba(255,255,255,.18);
  pointer-events: none;
  border-radius: inherit;
  z-index: 0; /* sous les cellules */
}

/* voile légèrement plus fort sur wrappers génériques */
.calendar-shell::before,
.calendar-grid::before {
  background: rgba(255,255,255,.28);
}

/* densité 2x / écrans retina */
@media (min-resolution: 1.25dppx),
       (min-resolution: 120dpi),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min--moz-device-pixel-ratio: 1.25) {
  .calendar-shell,
  .calendar-grid,
  calendar,
  monthGrid,
  #vue-calendrier.carte {
    background-image: var(--alu-tile-2x, var(--img-aluminium));
    /* taille de trame doublée pour 2x */
    background-size: calc(var(--alu-size, 96px) * 2) calc(var(--alu-size, 96px) * 2);
  }
}

/* accessibilité : contraste renforcé si demandé */
@media (prefers-contrast: more) {
  .calendar-shell::before,
  .calendar-grid::before,
  calendar::before,
  monthGrid::before,
  #vue-calendrier.carte::before {
    background: rgba(255,255,255,.28);
  }
}
