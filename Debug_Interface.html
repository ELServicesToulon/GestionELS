<!DOCTYPE html>
<html lang="fr">
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panneau de Débogage</title>
    <style>
        body { font-family: Montserrat, sans-serif; margin: 20px; background-color: #0b0e13; color: #fff; }
        h1 { color: #fff; }
        .test-suite { background-color: #0f151f; border: 1px solid #1d2a3a; border-radius: 5px; padding: 15px; margin-bottom: 15px; }
        button { background: linear-gradient(135deg, #8e44ad, #3498db); color: #fff; border: none; padding: 10px 18px; border-radius: 9999px; cursor: pointer; margin-right: 10px; box-shadow: 0 6px 18px rgba(0,0,0,.18); transition: transform .08s ease, box-shadow .2s ease; }
        button:hover { transform: translateY(-1px); }
        button:focus { outline: 2px solid #3498db; outline-offset: 2px; }
        button:active { transform: translateY(0); }
        #results { margin-top: 20px; background-color: #101724; color: #fff; padding: 15px; border-radius: 5px; white-space: pre-wrap; font-family: monospace; height: 400px; overflow-y: scroll; }
    </style>
</head>
<body>
    <h1>Panneau de Débogage</h1>

    <div class="test-suite">
        <h3>Tests Complets</h3>
        <p>Lance l'ensemble des tests du back-office. Les résultats s'afficheront dans la console ci-dessous et dans les journaux Apps Script.</p>
        <button id="btn-run-all">Lancer tous les tests</button>
    </div>
    
    <div id="results">
        Cliquez sur un bouton pour lancer les tests...
    </div>

    <script>
        document.getElementById('btn-run-all').addEventListener('click', () => {
            document.getElementById('results').textContent = 'Lancement des tests... Veuillez patienter.';
            google.script.run
                .withSuccessHandler(logs => {
                    document.getElementById('results').textContent = "Tests terminés !\n\n" + logs;
                })
                .withFailureHandler(err => {
                    document.getElementById('results').textContent = "Une erreur est survenue : " + err.message;
                })
                .lancerTousLesTestsEtRetournerLogs();
        });
    </script>
</body>
</html>
